{"version":3,"sources":["components/Alert.js","components/courses/creatorView/CheckPoints.js","css/courses/creatorView/CheckPointsStyle.js"],"names":["showAlert","ref","showTime","document","getElementById","removeAlert","window","sessionStorage","getItem","clearTimeout","remove","div","createElement","id","innerHTML","body","appendChild","setTimeout","setItem","CheckPoints","props","state","renderQRCodeList","bind","clickedqrCodesModal","removeModal","this","getCheckPoints","CheckPointsStyle","event","checkPoints","helpers","SubmitDataHelpers","postData","checkPointNo","firstCheckPoint","then","res","error","console","log","forEach","checkPoint","code","eventName","courseType","point","setState","className","onClick","innerWidth","e","preventDefault","k","content","tbody","push","key","value","size","level","type","min","max","defaultValue","onChange","updateScore","onMouseDown","length","downloadQRCode","modal","onclick","localStorage","ReactDOM","render","showModal","target","substring","jszip","JSZip","folder","qrCodes","getElementsByTagName","Object","keys","i","base64URL","toDataURL","replace","file","base64","generateAsync","FileSaver","saveAs","React","Component","setStyle","eId","style","height","innerHeight","borderRadius","parseInt","offsetHeight","offsetWidth","checkpointsTable","eClass","offsetTop","btn","setBtn","darkLightMode","userAgent","navigator","vendor","opera","test","addEventListener"],"mappings":"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","file":"static/js/9.dcdf1deb.chunk.js","sourcesContent":["let showAlert = function showAlert(ref, showTime){\n    if(document.getElementById('error')){\n        let removeAlert = window.sessionStorage.getItem(\"removeAlert\");\n        clearTimeout(removeAlert);\n        document.getElementById('error').remove();\n    }\n\n    let div = document.createElement('div');\n    div.id = 'error';\n    div.innerHTML = ''\n                + '<div class=\"alert alert-warning alert-dismissible fade show\" role=\"alert\" style=\"text-align:center\">'\n                +    ref\n                +    '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">'\n                +    '<span aria-hidden=\"true\">&times;</span>'\n                +    '</button>'\n                + '</div>';\n    document.body.appendChild(div);\n\n    if(showTime != -1){\n        let removeAlert = setTimeout(function(){\n            if(document.getElementById('error')){\n                document.getElementById('error').remove();\n            }\n        }, showTime);\n\n        window.sessionStorage.setItem(\"removeAlert\", removeAlert);\n    }\n}\n\nexport {showAlert};","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport QRCode from 'qrcode.react';\r\nimport JSZip from 'jszip';\r\nimport FileSaver from 'file-saver';\r\nimport {showAlert} from '../../Alert';\r\nimport SubmitDataHelpers from '../../helpers/SubmitDataHelpers';\r\n\r\nimport CheckPointsStyle from '../../../css/courses/creatorView/CheckPointsStyle';\r\nimport '../../../css/courses/creatorView/CheckPoints.css';\r\n\r\nclass CheckPoints extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {};\r\n\r\n        this.renderQRCodeList = this.renderQRCodeList.bind(this);\r\n        this.clickedqrCodesModal = this.clickedqrCodesModal.bind(this);\r\n        this.removeModal = this.removeModal.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getCheckPoints();\r\n        CheckPointsStyle();\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        //CheckPointsStyle();\r\n    }\r\n\r\n    async getCheckPoints(){\r\n        let event = {...this.props.event};\r\n        let checkPoints = {...this.props.checkPoints};\r\n\r\n        let helpers = new SubmitDataHelpers;\r\n        let res = await helpers.postData('/checkpoints/getCheckPoints/',\r\n        {\r\n            checkPointNo: checkPoints.checkPointNo,\r\n            firstCheckPoint: checkPoints.firstCheckPoint,\r\n        }).then(res => {\r\n            if(!res.error){\r\n                res.forEach(checkPoint => {\r\n                    checkPoint.code += '-' + event.eventName;\r\n                    checkPoint.code +=  '-' + event.courseType;\r\n                    checkPoint.code += '-' + checkPoints.firstCheckPoint;\r\n                    checkPoint.code += '-' + checkPoints.checkPointNo;\r\n                    checkPoint.code += '-' + checkPoint.point;\r\n                });\r\n                \r\n                this.setState({checkPoints: res});\r\n                return res;\r\n            } else {\r\n                showAlert(res.error, 5000);\r\n                console.log(res);\r\n                return false;\r\n            }\r\n        });\r\n\r\n        return res;\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <button className='button ciSubmit col-5' onClick={this.renderQRCodeList}>\r\n                Show {this.props.checkPoints.checkPointNo}&nbsp;\r\n                {window.innerWidth < 576? <i className='fas fa-qrcode'></i>: 'QRCodes'}\r\n            </button>\r\n        );\r\n    }\r\n\r\n    async renderQRCodeList(e){\r\n        e.preventDefault();\r\n\r\n        let checkPoints = await this.getCheckPoints();\r\n\r\n        let content = [];\r\n\r\n        let tbody = [];\r\n        for(let k in checkPoints){\r\n            let checkPoint = checkPoints[k];\r\n\r\n            tbody.push(\r\n                <div className=\"checkpoint tr row py-2\" key={checkPoint.id} value={checkPoint.id}>\r\n                    <div className=\"td col-2 d-flex justify-content-center align-items-center\">\r\n                        <span>{checkPoint.id}</span>\r\n                    </div>\r\n                    <div className=\"td col-6 d-flex justify-content-center align-items-center\">\r\n                        <QRCode\r\n                            key={checkPoint.id}\r\n                            id={checkPoint.id}\r\n                            value={checkPoint.code}\r\n                            size={50}\r\n                            level={\"H\"}   \r\n                        />\r\n                    </div>\r\n                    <div className=\"td col-4 d-flex justify-content-center align-items-center\">\r\n                        <span>\r\n                            <input \r\n                                type=\"number\" min=\"0\" max=\"10\" defaultValue={checkPoint.point}\r\n                                onChange = {(e) => {this.updateScore(e, k)}}\r\n                            />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        content.push(\r\n            <div key=\"checkpoints\" id=\"checkpoints\" \r\n                className=\"checkpoints card shadow-lg pt-4 px-3 px-sm-4\" \r\n                onMouseDown={this.clickedqrCodesModal}\r\n            >\r\n                <div className=\"card-title mt-3\">\r\n                    <h2>{this.props.event.eventName}</h2>\r\n                    <h4>&#9827;&nbsp; {this.props.event.courseType} &nbsp;&#9827;</h4>\r\n                </div>\r\n\r\n                <div className=\"checkpointsTable mx-auto mb-4 mt-2 mt-sm-4 shadow px-2 pt-2 pb-0 border\">\r\n                    <div className=\"tcaption text-left pl-1 pt-1 pb-2\">QRCodes ( {checkPoints? checkPoints.length : '0'} qrCode(s) )</div>\r\n                    <div className=\"table mx-auto border\">\r\n                        <div className=\"thead col-12\">\r\n                            <div className=\"tr row py-3\">\r\n                                <div className=\"th col-2\">ID</div>\r\n                                <div className=\"th col-6\">QRcode</div>\r\n                                <div className=\"th col-4\">Point</div>\r\n                            </div>\r\n                        </div>\r\n                        <div id=\"qrCodes\" className=\"tbody col-12 overflow-auto\">\r\n                            {tbody}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"downloadqrCodes col-12 d-flex justify-content-end\">\r\n                        <button className=\"btn border-bottom col-8 col-sm-5 px-2\" onClick={this.downloadQRCode}>\r\n                            {window.innerWidth > 576? 'Download' : <i className='fas fa-download'></i>}&nbsp;\r\n                            {this.props.checkPoints.checkPointNo} QRCodes \r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>   \r\n        );\r\n        \r\n        let modal = document.createElement(\"div\");\r\n        modal.id = \"popUpModal\";\r\n        modal.className = \"popUpModal\";\r\n        modal.onclick = this.removeModal;\r\n\r\n        if(window.localStorage.getItem('darkThemeMode') == 'on'){\r\n            modal.className += \" dark-popUpModal\";   \r\n        }\r\n\r\n        document.body.appendChild(modal);\r\n        await ReactDOM.render(content, modal);\r\n        CheckPointsStyle();\r\n        //this.downloadQRCode();\r\n    }\r\n\r\n    clickedqrCodesModal(){\r\n        this.setState({...this.state, ['showModal']: true});\r\n        //console.log(this.state.showModal);\r\n    }\r\n\r\n    removeModal(){\r\n        //console.log(this.state.showModal);\r\n        if(!this.state.showModal){\r\n            document.getElementById(\"popUpModal\").remove();\r\n        } else{\r\n            this.setState({...this.state, ['showModal']: null});\r\n        }\r\n    }\r\n\r\n    updateScore(e, k){\r\n        let checkPoints = this.state.checkPoints;\r\n        checkPoints[k].point = e.target.value;\r\n        checkPoints[k].code = checkPoints[k].code.substring(0, checkPoints[k].code.length - 2) + '-' + e.target.value;\r\n\r\n        this.setState({checkPoints: checkPoints});\r\n        //console.log(this.state.checkPoints);\r\n    }\r\n\r\n    updateMsg(e, k){\r\n        //console.log(e.target.value);\r\n    }\r\n\r\n    downloadQRCode(){\r\n        let eventName = window.sessionStorage.getItem(\"eventName\");\r\n        let courseType = window.sessionStorage.getItem(\"courseType\");\r\n        let jszip = new JSZip();\r\n        let folder = jszip.folder(\"QRCodes(\" + eventName + \"-\" + courseType +\")\");\r\n        let qrCodes = document.getElementById(\"qrCodes\").getElementsByTagName(\"canvas\");\r\n        //console.log(qrCodes);\r\n        Object.keys(qrCodes).forEach(i =>{\r\n            let link = document.createElement('a');\r\n            let base64URL = qrCodes[i].toDataURL().replace(/^data:image\\/(png|jpg);base64,/, \"\")\r\n            folder.file('check_point_'+ i + '.jpg', base64URL, {base64:true})\r\n        });\r\n\r\n        jszip.generateAsync({type:\"blob\"})\r\n        .then(function(content) {\r\n            // see FileSaver.js\r\n            FileSaver.saveAs(content, \"QRCodes(\" + eventName + \"-\" + courseType + \").zip\");\r\n        });\r\n\r\n        //document.getElementById(\"courseQRCodes\").remove();\r\n    }\r\n}\r\n\r\nexport default CheckPoints;","import {eId, eClass, darkLightMode} from '../../../components/helpers/StylingHelpers';\n\nfunction CheckPointsStyle(){\n    setDarkLightMode();\n    setStyle();\n\n    var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n    if (!(/android/i.test(userAgent))) {\n        window.addEventListener('resize', setStyle);\n    }\n}\n\nexport default CheckPointsStyle;\n\nfunction setDarkLightMode(){\n    darkLightMode(\"checkpoints\");\n    darkLightMode('input');\n    darkLightMode('button');\n}\n\nfunction setStyle(){\n    if(!eId('qrCodes')){\n        return false;\n    }\n\n    eId(\"checkpoints\").style.height = window.innerHeight * 0.8 + 'px';\n\n    if(window.innerWidth > window.innerHeight){\n        eId('checkpoints').style.borderRadius = parseInt(eId('checkpoints').offsetHeight) * 0.07 + 'px';\n    } else {\n        eId('checkpoints').style.borderRadius = parseInt(eId('checkpoints').offsetWidth) * 0.07 + 'px';\n    }\n\n    let checkpointsTable = eClass('checkpointsTable')[0];\n    checkpointsTable.style.height = (eId(\"checkpoints\").offsetTop + eId(\"checkpoints\").offsetHeight - checkpointsTable.offsetTop) * 0.8 + 'px';\n    eClass('table')[0].style.height = 0 ;\n    eClass('table')[0].style.height = (eClass('downloadqrCodes')[0].offsetTop - eClass('table')[0].offsetTop) * 1 - checkpointsTable.offsetHeight * 0.03 + 'px';\n    eClass('tbody')[0].style.height = eClass('table')[0].offsetHeight -  eClass('thead')[0].offsetHeight + 'px';\n\n    setBtn('btn');\n}\n\nfunction setInput(ref){\n    let input = eClass(ref);\n    for(let i = 0; i < input.length; i++){\n        input[i].style.borderRadius = input[0].offsetWidth * 0.05 + 'px';\n    }\n}\n\nfunction setBtn(ref){\n    let btn = eClass(ref);\n    for(let i = 0; i < btn.length; i++){\n        btn[i].style.borderRadius = btn[0].offsetWidth * 0.15 + 'px';\n    }\n}"],"sourceRoot":""}