(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[38,30,31,50,71],{18:function(e,t,n){"use strict";n.r(t);var s=n(2),a=function e(){Object(s.a)(this,e)};function r(e,t,n){var s=e[t];e[t]=e[n],e[n]=s}function o(e,t){var n=t.split("/"),s=e;return n.forEach((function(e){s=s[e]})),s}t.default=a,a.prototype.findMax=function(e,t){var n,s;return e.forEach((function(e){var a=Number(o(e,t));(null==n||n<a)&&(n=a,s=e)})),s},a.prototype.findMin=function(e,t){var n,s=0;return e.forEach((function(e){var a=Number(o(e,t));(null==n||n>a)&&(n=a,s=e)})),s},a.prototype.quickSort=function e(t,n,s,a){var i;return t.length>1&&(n<(i=function(e,t,n,s){var a=e[Math.floor((n+t)/2)],i=t,c=n;for(;i<=c;){for(;o(e[i],s)<o(a,s);)i++;for(;o(e[c],s)>o(a,s);)c--;i<=c&&(r(e,i,c),i++,c--)}return i}(t,n,s,a))-1&&e(t,n,i-1,a),i<s&&e(t,i,s,a)),t}},19:function(e,t,n){"use strict";n.r(t);var s=n(2),a=function e(){Object(s.a)(this,e)};t.default=a,a.prototype.sToHms=function(e){var t={},n=parseInt(e/3600),s=parseInt((e-3600*n)/60),a=e-3600*n-60*s;return(t={h:n=n<10?"0"+n:n,m:s=s<10?"0"+s:s,s:a=a<10?"0"+a:a}).full=n+":"+s+":"+a,n=0==n?"":n+":",s=0==s?"":s+":",t.short=n+s+a,t}},24:function(e,t,n){"use strict";n.r(t);var s=n(2),a=n(11),r=n(46),o=n(12),i=n(13),c=n(1),l=n.n(c),u=n(17),f=n(3),m=n(18),p=n(19),d=n(57),h=(n(84),function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={},a.countTimeLeft=a.countTimeLeft.bind(Object(r.a)(a)),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.renderResults(),this.interval=setInterval((function(){e.renderResults()}),15e3),this.countTimeLeft();var t=window.setInterval(this.countTimeLeft,1e3);window.sessionStorage.setItem("countTimeLeft",t),Object(d.default)(this.props.course.checkPointNo)}},{key:"componentDidUpdate",value:function(){Object(d.default)(this.props.course.checkPointNo)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return l.a.createElement("div",{id:"courseScan",className:"courseScan px-sm-5 pt-5"},l.a.createElement("h2",{className:"mt-5"},"Live Results"),l.a.createElement("h4",{className:"mb-5"},"( ",this.state.timeLeft," )"),l.a.createElement("div",{id:"resultsChart",className:"resultsChart"},this.state.content))}},{key:"renderResults",value:function(){var e=this,t=this.props.course;(new f.default).postData("/results/getResults/",{event:this.props.course.event,type:this.props.course.type}).then((function(n){n.error?Object(u.showAlert)(n.error,5e3):function(){for(var s=new m.default,a=s.findMax(n,"scanNo").scanNo,r=[],o=function(){var e=[];n.forEach((function(t){t.scanNo==a&&e.push(t)}));for(var o=0,i=function(){var a=[],i=s.findMin(e,"timeTaken"),c=(new p.default).sToHms(i.timeTaken).short;a.push(l.a.createElement("div",{key:i.username,className:"label d-sm-flex flex-sm-row justify-content-sm-end align-items-sm-center td col-sm-4 m-0 p-0 text-left text-sm-right"},i.username,l.a.createElement("b",null),window.innerWidth>576?"":l.a.createElement("br",null),l.a.createElement("div",{className:"text-sm-center px-sm-3 mb-sm-0 d-sm-flex justify-content-sm-center align-items-sm-center"},l.a.createElement("b",null,c,l.a.createElement("br",null),"Score"==t.type?" (Points: "+i.score+")":""))));var u=[];n.forEach((function(e){e.username===i.username&&u.push(e)})),u=s.quickSort(u,0,u.length-1,"scanNo");var f=[];u.forEach((function(e){var t=parseInt(e.timeTaken/3600),n=parseInt((e.timeTaken-3600*t)/60),s=e.timeTaken-3600*t-60*n,a=(t=0==(t=t<10?"0"+t:t)?"":t+":")+(n=n<10?"0"+n+":":n+":")+(s=s<10?"0"+s:s);f.push(l.a.createElement("div",{key:a,className:"checkpoint tooltips d-flex align-items-center"},l.a.createElement("div",{className:""}),l.a.createElement("span",{className:"tooltiptext px-3 py-3"},"Number of Scans: ",e.scanNo,l.a.createElement("br",null),"Score: ",e.score,l.a.createElement("br",null),"Time Taken: ",a,l.a.createElement("br",null),"Speed: ",(new p.default).sToHms(e.speed).short)))})),a.push(l.a.createElement("div",{key:i.username+"bar",className:"td bar col-sm-8 p-0 text-left d-flex align-items-center"},f)),r.push(l.a.createElement("div",{key:i.username+"tr",className:"tr col-12 row p-0 m-0 pt-2"},a));for(var m=n.length-1;m>=0;m--){var d=n[m];d.username===i.username&&n.splice(n.indexOf(d),1)}if(e.splice(e.indexOf(i),1),++o>1e3)return"break"};e.length>0;){if("break"===i())break}a--};a>0;)o();var i=[];i.push(l.a.createElement("div",{key:"table",className:"table col-10 col-sm-12"},l.a.createElement("div",{className:"tbody"},r))),e.setState({content:i})}()}))}},{key:"countTimeLeft",value:function(){var e=this.props.course.endTime;e=3600*(e=e.split(":"))[0]+60*e[1];var t=new Date,n=e-(3600*t.getHours()+60*t.getMinutes()+t.getSeconds()),s=parseInt(n/3600),a=parseInt((n-3600*s)/60),r=n-3600*s-60*a;n=(s=0==(s=s<10?"0"+s:s)?"":s+" : ")+(a=a<10?"0"+a+" : ":a+" : ")+(r=r<10?"0"+r:r),this.setState({timeLeft:n})}}]),n}(l.a.Component));t.default=h},57:function(e,t,n){"use strict";n.r(t);var s=n(0);function a(e){Object(s.eId)("courseScan").style.height=Object(s.eId)("nav").offsetTop-Object(s.eId)("courseScan").offsetTop+"px",Object(s.eId)("resultsChart").style.height=Object(s.eId)("nav").offsetTop-Object(s.eId)("resultsChart").offsetTop+"px",function(e){if(!Object(s.eClass)("bar"))return!1;for(var t=Object(s.eClass)("bar"),n=function(n){for(var s=t[n].getElementsByClassName("checkpoint"),a=function(a){s[a].style.width=t[n].offsetWidth/(parseInt(e)+1)+"px",s[a].style.height="15px",0==a&&(s[a].style.borderLeft="2px solid #5aa2f9"),a==s.length-1&&(s[a].style.borderRight="2px solid #5aa2f9",s[a].getElementsByTagName("div")[0].style.borderRight=0),s[a].onmouseenter=function(){window.sessionStorage.setItem("showTooltip","1"),r(s[a])},s[a].onmouseleave=function(){window.sessionStorage.removeItem("showTooltip"),r(s[a])}},o=0;o<s.length;o++)a(o)},a=0;a<t.length;a++)n(a)}(e)}function r(e){var t=e.getElementsByClassName("tooltiptext")[0];1==window.sessionStorage.showTooltip?(t.style.top=t.offsetTop-.7*t.offsetHeight-Object(s.eClass)("tbody")[0].scrollTop+"px",t.style.left=t.offsetLeft-.1*t.offsetWidth-Object(s.eClass)("tbody")[0].scrollLeft+"px",t.style.visibility="visible"):(t.style.top="initial",t.style.left="initial",t.style.visibility="hidden")}t.default=function(e){Object(s.darkLightMode)("courseScan"),a(e);var t=navigator.userAgent||navigator.vendor||window.opera;/android/i.test(t)||window.addEventListener("resize",(function(){a(e)}))}},84:function(e,t,n){}}]);
//# sourceMappingURL=38.cac76413.chunk.js.map