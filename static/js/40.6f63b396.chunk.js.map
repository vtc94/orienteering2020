{"version":3,"sources":["components/courses/creatorView/Participants.js","css/courses/creatorView/ParticipantsStyle.js"],"names":["Participants","props","state","showParticipants","bind","clickedParticipantModal","removeModal","addNewParticipant","deleteParticipant","this","getParticipants","ParticipantsStyle","event","SubmitDataHelpers","postData","eventName","courseType","then","res","error","showAlert","setState","participants","className","onClick","length","window","innerWidth","e","preventDefault","document","getElementById","remove","parNo","tbody","forEach","participant","push","key","value","onContextMenu","sessionStorage","username","data-toggle","data-placement","title","onMouseDown","content","id","autoComplete","onSubmit","type","name","placeholder","autoFocus","modal","createElement","onclick","localStorage","getItem","body","appendChild","ReactDOM","render","showModal","parName","target","innerHTML","React","Component","setStyle","eId","style","height","innerHeight","borderRadius","parseInt","offsetHeight","offsetWidth","parTable","eClass","offsetTop","ref","input","i","setInput","darkLightMode","userAgent","navigator","vendor","opera","test","addEventListener"],"mappings":"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","file":"static/js/40.6f63b396.chunk.js","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {showAlert} from '../../Alert';\r\nimport SubmitDataHelpers from '../../helpers/SubmitDataHelpers';\r\n\r\nimport ParticipantsStyle from '../../../css/courses/creatorView/ParticipantsStyle';\r\nimport '../../../css/courses/creatorView/Participants.css';\r\nclass Participants extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {};\r\n        this.showParticipants = this.showParticipants.bind(this);\r\n        this.clickedParticipantModal = this.clickedParticipantModal.bind(this);\r\n        this.removeModal = this.removeModal.bind(this);\r\n        this.addNewParticipant = this.addNewParticipant.bind(this);\r\n        this.deleteParticipant = this.deleteParticipant.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        //console.log(this.props);\r\n        this.getParticipants();\r\n        ParticipantsStyle();\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        //ParticipantsStyle();\r\n    }\r\n\r\n    getParticipants(){\r\n        let event = {...this.props.event};\r\n        let helpers = new SubmitDataHelpers;\r\n        helpers.postData('/participants/getParticipants',\r\n            {\r\n                eventName: event.eventName,\r\n                courseType: event.courseType,\r\n            }\r\n        ).then(res => {\r\n            //console.log(res);\r\n            if(!res.error){\r\n                this.setState({participants: res});\r\n            } else {\r\n                //console.log(res);\r\n                showAlert(res.error, 5000);\r\n\r\n                this.setState({error: res.error});\r\n            }\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <button className='button ciSubmit col-5' onClick={this.showParticipants}>\r\n                Show {this.state.participants? this.state.participants.length: 0}&nbsp;\r\n                {window.innerWidth < 576? <i className='fas fa-users'></i>: 'participants'}\r\n            </button>\r\n        );\r\n    }\r\n\r\n    showParticipants(e){\r\n        if(e){\r\n            e.preventDefault();\r\n        }\r\n\r\n        /*if(document.getElementById(\"participants-wrap\")){\r\n            document.getElementById(\"participants-wrap\").remove();\r\n        }*/\r\n\r\n        if(document.getElementById(\"popUpModal\")){\r\n            document.getElementById(\"popUpModal\").remove();\r\n        }\r\n\r\n        let parNo = 1;\r\n        let tbody = [];\r\n        if(this.state.participants){\r\n            //console.log(this.state.participants);\r\n            let participants = this.state.participants;\r\n\r\n            participants.forEach(participant => {\r\n                tbody.push(\r\n                    <div className=\"participant tr row py-2\" \r\n                        key={participant} value={participant}\r\n                        onContextMenu={e => this.deleteParticipant(e, participant)}\r\n                    >\r\n                        <div className=\"td col-3\">{parNo}</div>\r\n                        <div className=\"td col-9\">\r\n                            {participant}\r\n                            {participant == window.sessionStorage.username? \r\n                                        '' : <i className=\"deletePar fas fa-minus-circle\" \r\n                                                data-toggle=\"tooltip\" data-placement=\"top\" title=\"Delete participant...\"\r\n                                                onMouseDown={e => this.deleteParticipant(e, participant)}\r\n                                            ></i>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n                parNo++;\r\n            });\r\n        } else {\r\n            showAlert(this.state.error);\r\n        }\r\n\r\n        let content = [];\r\n        content.push(\r\n            <div key=\"participants\" id=\"participants\" className=\"participants card shadow-lg pt-4 px-3 px-sm-4\" onMouseDown={this.clickedParticipantModal}>\r\n                <div className=\"card-title mt-3\">\r\n                    <h2>{this.props.event.eventName}</h2>\r\n                    <h4>&#9827;&nbsp; {this.props.event.courseType} &nbsp;&#9827;</h4>\r\n                </div>\r\n                <div className=\"parTable mx-auto mb-4 mt-2 mt-sm-4 shadow px-2 pt-2 pb-0 border\">\r\n                    <div className=\"tcaption text-left pl-1 pt-1 pb-2\">Participants ( {this.state.participants? this.state.participants.length : '0'} player(s) )</div>\r\n                    <div className=\"table mx-auto border\">\r\n                        <div className=\"thead col-12\">\r\n                            <div className=\"tr row py-3\">\r\n                                <div className=\"th col-3\">No.</div>\r\n                                <div className=\"th col-9\">Username</div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"tbody col-12 overflow-auto\">\r\n                            {tbody}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <form className=\"addPar col-12 d-flex justify-content-end\" autoComplete=\"off\" onSubmit={this.addNewParticipant}>\r\n                        <input className=\"input border-bottom col-5 col-sm-5 px-2\" type=\"text\" name=\"parName\" placeholder=\"Add player...\" autoFocus />\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n        let modal = document.createElement(\"div\");\r\n        modal.id = \"popUpModal\";\r\n        modal.className = \"popUpModal\";\r\n        modal.onclick = this.removeModal;\r\n\r\n        if(window.localStorage.getItem('darkThemeMode') == 'on'){\r\n            modal.className += \" dark-popUpModal\";   \r\n        }\r\n\r\n        document.body.appendChild(modal);\r\n        ReactDOM.render(content, modal);\r\n        ParticipantsStyle();\r\n    }\r\n\r\n    clickedParticipantModal(){\r\n        this.setState({...this.state, ['showModal']: true});\r\n        //console.log(this.state.showModal);\r\n    }\r\n\r\n    removeModal(){\r\n        //console.log(this.state.showModal);\r\n        if(!this.state.showModal){\r\n            document.getElementById(\"popUpModal\").remove();\r\n        } else{\r\n            this.setState({...this.state, ['showModal']: null});\r\n        }\r\n    }\r\n\r\n    addNewParticipant(e){\r\n        e.preventDefault();\r\n\r\n        let event = {...this.props.event};\r\n        let helpers = new SubmitDataHelpers;\r\n        helpers.postData('/participants/addParticipant',\r\n            {\r\n                eventName: event.eventName,\r\n                courseType: event.courseType,\r\n                parName: e.target[\"parName\"].value,\r\n            }\r\n        ).then(res => {\r\n            //console.log(res);\r\n            if(!res.error){\r\n                this.setState({participants: res});\r\n                this.setState({error: null});\r\n                this.showParticipants();\r\n            } else {\r\n                showAlert(res.error, 5000);\r\n\r\n                this.setState({error: res.error});\r\n                //this.setState({participants: null});\r\n            }\r\n        });\r\n    }\r\n\r\n    deleteParticipant(e, participant){\r\n        if(participant == window.sessionStorage.username){\r\n            showAlert('You cannot remove event creator..');\r\n            return false;\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.target.innerHTML = \"<del>\" + e.target.innerHTML + \"</del>\";\r\n        let event = {...this.props.event};\r\n        let helpers = new SubmitDataHelpers;\r\n        helpers.postData('/participants/deleteParticipant',\r\n            {\r\n                eventName: event.eventName,\r\n                courseType: event.courseType,\r\n                parName: participant,\r\n            }\r\n        ).then(res => {\r\n            //console.log(res);\r\n            if(!res.error){\r\n                this.setState({participants: res});\r\n                this.setState({error: null});\r\n            } else {\r\n                showAlert(res.error, 5000);\r\n                \r\n                this.setState({error: res.error});\r\n                this.setState({participants: null});\r\n            }\r\n\r\n            this.showParticipants();\r\n        });\r\n    }\r\n}\r\n\r\nexport default Participants;","import {eId, eClass, darkLightMode} from '../../../components/helpers/StylingHelpers';\n\nfunction ParticipantsStyle(){\n    setDarkLightMode();\n    setStyle();\n\n    var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n    if (!(/android/i.test(userAgent))) {\n        window.addEventListener('resize', setStyle);\n    }\n}\n\nexport default ParticipantsStyle;\n\nfunction setDarkLightMode(){\n    darkLightMode(\"participants\");\n    darkLightMode('input');\n    darkLightMode('button');\n}\n\nfunction setStyle(){\n    if(!eId('participants')){\n        return false;\n    }\n\n    eId(\"participants\").style.height = window.innerHeight * 0.8 + 'px';\n\n    if(window.innerWidth > window.innerHeight){\n        eId('participants').style.borderRadius = parseInt(eId('participants').offsetHeight) * 0.07 + 'px';\n    } else {\n        eId('participants').style.borderRadius = parseInt(eId('participants').offsetWidth) * 0.07 + 'px';\n    }\n\n    let parTable = eClass('parTable')[0];\n    parTable.style.height = (eId(\"participants\").offsetTop + eId(\"participants\").offsetHeight - parTable.offsetTop) * 0.8 + 'px';\n    eClass('table')[0].style.height = 0 ;\n    eClass('table')[0].style.height = (eClass('addPar')[0].offsetTop - eClass('table')[0].offsetTop) - parTable.offsetHeight * 0.03 + 'px';\n    eClass('tbody')[0].style.height = eClass('table')[0].offsetHeight -  eClass('thead')[0].offsetHeight + 'px';\n    setInput('input');\n}\n\nfunction setInput(ref){\n    let input = eClass(ref);\n    for(let i = 0; i < input.length; i++){\n        input[i].style.borderRadius = input[0].offsetWidth * 0.05 + 'px';\n    }\n}"],"sourceRoot":""}