{"version":3,"sources":["components/Alert.js","components/helpers/TimeHelpers.js","components/guest/Result.js","css/courses/CourseResultStyle.js"],"names":["showAlert","ref","showTime","document","getElementById","removeAlert","window","sessionStorage","getItem","clearTimeout","remove","div","createElement","id","innerHTML","body","appendChild","setTimeout","setItem","TimeHelpers","prototype","sToHms","seconds","time","h","parseInt","m","s","full","short","Result","props","state","this","renderResults","CourseResultStyle","checkpointNo","className","content","SubmitDataHelpers","postData","event","type","then","res","error","user","cookieHelpers","CookieHelpers","getCookie","localStorage","your","results","slice","count","tr","length","minResult","username","checkpoint","i","r","push","key","position","timeTaken","scanNo","score","speed","splice","td","course","innerWidth","indexOf","setState","React","Component","setStyle","checkPointNo","eId","style","height","offsetTop","eClass","offsetHeight","bars","checkpoints","getElementsByClassName","j","width","offsetWidth","borderLeft","borderRight","getElementsByTagName","onmouseenter","setTooltip","onmouseleave","removeItem","setBar","tooltip","showTooltip","top","scrollTop","left","offsetLeft","scrollLeft","visibility","darkLightMode","userAgent","navigator","vendor","opera","test","addEventListener"],"mappings":"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","file":"static/js/13.37575a68.chunk.js","sourcesContent":["let showAlert = function showAlert(ref, showTime){\n    if(document.getElementById('error')){\n        let removeAlert = window.sessionStorage.getItem(\"removeAlert\");\n        clearTimeout(removeAlert);\n        document.getElementById('error').remove();\n    }\n\n    let div = document.createElement('div');\n    div.id = 'error';\n    div.innerHTML = ''\n                + '<div class=\"alert alert-warning alert-dismissible fade show\" role=\"alert\" style=\"text-align:center\">'\n                +    ref\n                +    '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">'\n                +    '<span aria-hidden=\"true\">&times;</span>'\n                +    '</button>'\n                + '</div>';\n    document.body.appendChild(div);\n\n    if(showTime != -1){\n        let removeAlert = setTimeout(function(){\n            if(document.getElementById('error')){\n                document.getElementById('error').remove();\n            }\n        }, showTime);\n\n        window.sessionStorage.setItem(\"removeAlert\", removeAlert);\n    }\n}\n\nexport {showAlert};","class TimeHelpers{\n\n}\n\nexport default TimeHelpers;\n\nTimeHelpers.prototype.sToHms = function(seconds){\n    let time = {};\n\n    let h = parseInt(seconds/3600);\n    let m = parseInt((seconds - h*3600)/60);\n    let s = seconds - h * 3600 - m * 60;\n    \n    h = h < 10? '0' + h : h;\n    m = m < 10? '0' + m : m;\n    s = s < 10? '0' + s : s;\n\n    time = {\n        h: h,\n        m: m,\n        s: s,\n    }\n\n    time.full = h + ':' + m + ':' + s;\n    \n    h = h == 0? '' : h + ':';\n    m = m == 0? '' : m + ':';\n\n    time.short = h + m + s;\n\n    return time;\n}","import React from 'react';\nimport {showAlert} from '../Alert';\nimport SubmitDataHelpers from '../helpers/SubmitDataHelpers';\n//import SortingHelpers from '../../helpers/SortingHelpers';\nimport CookieHelpers from '../helpers/CookieHelpers';\nimport TimeHelpers from '../helpers/TimeHelpers';\n\nimport CourseResultStyle from '../../css/courses/CourseResultStyle';\nimport '../../css/courses/CourseResult.css';\n\nclass Result extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {};\n    }\n\n    componentDidMount(){\n        this.renderResults();\n        //console.log(window.sessionStorage.checkpointNo);\n        CourseResultStyle(window.sessionStorage.checkpointNo);\n    }\n\n    componentDidUpdate(){\n        CourseResultStyle(window.sessionStorage.checkpointNo);\n    }\n\n    componentWillUnmount(){\n\n    }\n\n    render(){\n        return(\n            <div id=\"courseResult\" className='courseResult px-sm-5 pt-4 pt-sm-5'>\n                <h2 className=\"title mt-3 mb-4\">Results</h2>\n                {this.state.content}\n            </div>\n        );\n    }\n\n    renderResults(){\n        let helpers = new SubmitDataHelpers;\n\n        helpers.postData('/results/getOrderedResults/', \n        {\n            event: window.sessionStorage.getItem(\"event\"),\n            type: window.sessionStorage.getItem(\"course\"),\n        }).then((res) => {\n            //console.log(res); // JSON data parsed by `response.json()` call\n            if(res.error){\n                //console.log(res.error);\n                showAlert(res.error, 5000);\n            } else {\n                let user;\n\n                let cookieHelpers = new CookieHelpers;\n                \n                if(cookieHelpers.getCookie(\"activeId\")){\n                    user = cookieHelpers.getCookie(\"activeId\");\n                } else {\n                    user = window.localStorage.getItem(\"guest\");\n                }\n\n                let your = [];\n\n                let results = res.slice();\n                let count = 0;\n\n                let tr = [];\n\n                while(results.length > 0){\n                    let minResult = results[0];\n                    let username = minResult.username;\n                    \n                    let checkpoint =[];\n\n                    for(let i = results.length - 1; i >= 0 ; i--){\n                        if(results[i].username == username){\n                            let r = results[i];\n\n                            checkpoint.push(\n                                <div key={r.position + r.timeTaken + 'checkpoint'} className='checkpoint tooltips d-flex align-items-center'>\n                                    <div className=''></div>\n                                    <span className=\"tooltiptext px-3 py-3\">\n                                        Number of Scans: {r.scanNo}\n                                        <br/>Score: {r.score}\n                                        <br/>Time Taken: {(new TimeHelpers).sToHms(r.timeTaken).short}\n                                        <br/>Speed: {(new TimeHelpers).sToHms(r.speed).short}\n                                    </span>\n                                </div>\n                            );\n\n                            results.splice(i,1);\n                            \n                        }\n                    }\n                    \n                    let td = [];\n\n                    td.push(\n                        <div key={minResult.username + 'td'} id={minResult.username} className='td col-10'>\n                            <div key={minResult.username + 'label'} className=\"header text-left py-3 px-3\"><b>{minResult.username}</b></div>\n                            <div key={minResult.username + 'bar'} className=\"bar col-12 d-flex align-items-center pb-3\">{checkpoint}</div>\n                            <div key={minResult.username + 'final'} className=\"finalResult col-12 d-flex justify-content-around pb-2\">\n                                {window.sessionStorage.course == 'Score'? \n                                <div className='score'>\n                                    {window.innerWidth > 576? 'Points: ' : 'P: '} {minResult.score}\n                                </div> : ''}\n                                <div className='timeTaken'>\n                                    {window.innerWidth > 576? 'Time Taken: ' : 'T: '} {(new TimeHelpers).sToHms(minResult.timeTaken).short}\n                                </div>\n                                <div className='speed'>\n                                    {window.innerWidth > 576? 'Average Speed: ' : 'AS: '} {(new TimeHelpers).sToHms(minResult.speed).short}\n                                </div>\n                            </div>\n                        </div>\n                    );\n                    \n                    td.push(\n                        <div key={minResult.position + 'td'} className='td col-2 pt-4'>\n                            <h4>{minResult.position}</h4>\n                            <span className='label'>{window.innerWidth > 576? 'Position' : 'Pos'}</span>\n\n                        </div>\n                    );\n                    \n                    tr.push(\n                        <div key={minResult.position + 'tr'} className='tr col-12 row p-0 mx-0 border'>\n                            {td}\n                        </div>\n                    );\n\n                    if(your.length == 0 && user.indexOf(minResult.username) == 0){\n                        your.push(\n                            <div key={minResult.position + 'yourtr'} className='tr col-12 row p-0 mx-0'>\n                                {td}\n                            </div>\n                        );\n                    }\n\n                    count++;\n                    if(count > 1000){\n                        //console.log(\"end\");\n                        break;\n                    }\n                }\n\n                let content = [];\n\n                content.push(\n                    <div key=\"yourResult\" id=\"yourResult\" className='yourResult mb-2'>\n                        {your}\n                    </div>\n                );\n\n                content.push(\n                    <div key='resultsTable' id=\"resultsTable\" className='resultsTable'>\n                        <div><b>All results</b></div>\n                        <div className='table col-12 p-0 py-1 py-sm-2 border'>\n                            <div className='tbody px-3 px-sm-4'>\n                                {tr}\n                            </div>\n                        </div>\n                    </div>\n                )\n\n                this.setState({content: content});\n            }\n        });\n    }\n}\n\nexport default Result;","import {eId, eClass, darkLightMode, randomColor} from '../../components/helpers/StylingHelpers';\n\nfunction CourseResultStyle(checkPointNo){\n    setDarkLightMode();\n    setStyle(checkPointNo);\n\n    var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n    if (!(/android/i.test(userAgent))) {\n        window.addEventListener('resize', function(){\n            setStyle(checkPointNo);\n        });\n    }\n}\n\nexport default CourseResultStyle;\n\nfunction setDarkLightMode(){\n    darkLightMode('courseResult');\n}\n\nfunction setStyle(checkPointNo){\n    eId('courseResult').style.height = eId('nav').offsetTop - eId('courseResult').offsetTop + 'px';\n    if(!eId('resultsTable')){\n        return false;\n    }\n\n    eId('resultsTable').style.height = (eId('nav').offsetTop - eId('resultsTable').offsetTop) * 0.99 + 'px';\n    eClass('table')[0].style.height = (eId('resultsTable').offsetTop + eId('resultsTable').offsetHeight - eClass('table')[0].offsetTop) * .97 + 'px';\n\n    setBar(checkPointNo);\n}\n\nfunction setBar(checkPointNo){\n    if(!eClass('bar')){\n        return false;\n    }\n\n    let bars = eClass('bar');\n    \n    for(let i = 0; i < bars.length; i++) {\n        let checkpoints = bars[i].getElementsByClassName('checkpoint');\n        //console.log(checkpoints.length);\n        for(let j = 0; j < checkpoints.length; j++) {\n            checkpoints[j].style.width = bars[i].offsetWidth/(parseInt(checkPointNo) + 1) + 'px';\n            checkpoints[j].style.height = '15px';\n            \n            if(j == 0){\n                checkpoints[j].style.borderLeft = '2px solid #5aa2f9';\n            }\n            \n            if(j == checkpoints.length - 1){\n                checkpoints[j].style.borderRight = '2px solid #5aa2f9';\n                checkpoints[j].getElementsByTagName('div')[0].style.borderRight = 0;\n            }\n\n            checkpoints[j].onmouseenter = function(){\n                window.sessionStorage.setItem('showTooltip', '1');\n                setTooltip(checkpoints[j]);\n            }\n\n            checkpoints[j].onmouseleave = function(){\n                window.sessionStorage.removeItem('showTooltip');\n                setTooltip(checkpoints[j]);\n            };\n            \n        }\n    }\n}\n\nfunction setTooltip(checkpoint){\n    let tooltip = checkpoint.getElementsByClassName('tooltiptext')[0];\n    \n    if(window.sessionStorage.showTooltip == 1){\n        tooltip.style.top = tooltip.offsetTop - tooltip.offsetHeight * 0.7 - eClass('tbody')[0].scrollTop + 'px';\n        tooltip.style.left = tooltip.offsetLeft - tooltip.offsetWidth * 0.1 - eClass('tbody')[0].scrollLeft + 'px';\n        tooltip.style.visibility = 'visible';\n    } else {\n        tooltip.style.top = 'initial';\n        tooltip.style.left = 'initial';\n        tooltip.style.visibility = 'hidden';\n    }\n}"],"sourceRoot":""}